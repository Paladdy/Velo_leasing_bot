# üåê Changelog: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç–∏

## –î–∞—Ç–∞: 27 –æ–∫—Ç—è–±—Ä—è 2025

### ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

#### 1. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `aiogram-i18n==1.4` –≤ `requirements.txt`
- ‚úÖ –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

#### 2. **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–π**
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –ø–∞–ø–∫–∞ `locales/` —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π 3 —è–∑—ã–∫–æ–≤:
  - `locales/ru/messages.json` - –†—É—Å—Å–∫–∏–π üá∑üá∫
  - `locales/tg/messages.json` - –¢–∞–¥–∂–∏–∫—Å–∫–∏–π üáπüáØ
  - `locales/uz/messages.json` - –£–∑–±–µ–∫—Å–∫–∏–π üá∫üáø

#### 3. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `language` –≤ –º–æ–¥–µ–ª—å `User` (database/models/user.py)
- ‚úÖ –°–æ–∑–¥–∞–Ω SQL —Å–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏: `init.sql/add_language_field.sql`
- ‚úÖ –°–æ–∑–¥–∞–Ω Python —Å–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏: `scripts/add_language_field.py`

#### 4. **–£—Ç–∏–ª–∏—Ç—ã –∏ middleware**
- ‚úÖ –°–æ–∑–¥–∞–Ω –º–æ–¥—É–ª—å `bot/utils/i18n.py` —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏:
  - `setup_i18n()` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ middleware
  - `UserLanguageManager()` - –º–µ–Ω–µ–¥–∂–µ—Ä –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —è–∑—ã–∫–∞ –∏–∑ –ë–î
  - `change_user_language()` - –∏–∑–º–µ–Ω–µ–Ω–∏–µ —è–∑—ã–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - `get_language_name()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è —è–∑—ã–∫–∞
- ‚úÖ Middleware –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ `main.py`

#### 5. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ `choosing_language` –≤ `bot/states/registration.py`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –≤—ã–±–æ—Ä–∞ —è–∑—ã–∫–∞ –≤ `bot/keyboards/common.py`
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω –ø—Ä–æ—Ü–µ—Å—Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –≤ `bot/handlers/common/start.py`:
  - –ù–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–Ω–∞—á–∞–ª–∞ –≤—ã–±–∏—Ä–∞—é—Ç —è–∑—ã–∫
  - –í—ã–±—Ä–∞–Ω–Ω—ã–π —è–∑—ã–∫ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

#### 6. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —è–∑—ã–∫–æ–º –≤ –ø—Ä–æ—Ñ–∏–ª–µ**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "üåê –ò–∑–º–µ–Ω–∏—Ç—å —è–∑—ã–∫" –≤ –ø—Ä–æ—Ñ–∏–ª–µ
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è —è–∑—ã–∫–∞ –≤ `bot/handlers/client/profile.py`
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ —è–∑—ã–∫–∞ –≤ –ø—Ä–æ—Ñ–∏–ª–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

#### 7. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**
- ‚úÖ –°–æ–∑–¥–∞–Ω –ø–æ–¥—Ä–æ–±–Ω—ã–π –≥–∞–π–¥: `I18N_SETUP.md`
- ‚úÖ –°–æ–∑–¥–∞–Ω —ç—Ç–æ—Ç changelog: `CHANGELOG_I18N.md`

### üìã –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º

#### –®–∞–≥ 1: –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –ë–î

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –æ–¥–∏–Ω –∏–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤:

**–í–∞—Ä–∏–∞–Ω—Ç A: –ß–µ—Ä–µ–∑ psql**
```bash
psql -U –≤–∞—à_—é–∑–µ—Ä -d –≤–∞—à–∞_–±–∞–∑–∞ -f init.sql/add_language_field.sql
```

**–í–∞—Ä–∏–∞–Ω—Ç B: –ß–µ—Ä–µ–∑ docker-compose**
```bash
docker-compose exec postgres psql -U –≤–∞—à_—é–∑–µ—Ä -d –≤–∞—à–∞_–±–∞–∑–∞ -f /path/to/init.sql/add_language_field.sql
```

**–í–∞—Ä–∏–∞–Ω—Ç C: Python —Å–∫—Ä–∏–ø—Ç (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ venv)**
```bash
python scripts/add_language_field.py
```

#### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥—ã

–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª—ã –≤ `locales/` –∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–µ—Ä–µ–≤–æ–¥—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ç–µ–∫—Å—Ç—ã –Ω–∞ —Ç–∞–¥–∂–∏–∫—Å–∫–æ–º –∏ —É–∑–±–µ–∫—Å–∫–æ–º —è–∑—ã–∫–∞—Ö.

#### –®–∞–≥ 3: –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞

```bash
python main.py
# –∏–ª–∏
python dev_run.py
```

### üß™ –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

1. **–¢–µ—Å—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:**
   - –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start` –Ω–æ–≤—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
   - –î–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è –≤—ã–±–æ—Ä —è–∑—ã–∫–∞
   - –í—ã–±–µ—Ä–∏—Ç–µ –ª—é–±–æ–π —è–∑—ã–∫
   - –ü—Ä–æ–π–¥–∏—Ç–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é

2. **–¢–µ—Å—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è —è–∑—ã–∫–∞:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ "üë§ –ü—Ä–æ—Ñ–∏–ª—å"
   - –ù–∞–∂–º–∏—Ç–µ "üåê –ò–∑–º–µ–Ω–∏—Ç—å —è–∑—ã–∫"
   - –í—ã–±–µ—Ä–∏—Ç–µ –¥—Ä—É–≥–æ–π —è–∑—ã–∫
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —è–∑—ã–∫ –∏–∑–º–µ–Ω–∏–ª—Å—è

3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ë–î:**
   ```sql
   SELECT telegram_id, full_name, language FROM users;
   ```

### üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

- **–§–∞–π–ª–æ–≤ –∏–∑–º–µ–Ω–µ–Ω–æ:** 10+
- **–§–∞–π–ª–æ–≤ —Å–æ–∑–¥–∞–Ω–æ:** 8
- **–°—Ç—Ä–æ–∫ –∫–æ–¥–∞ –¥–æ–±–∞–≤–ª–µ–Ω–æ:** ~800+
- **–Ø–∑—ã–∫–æ–≤ –¥–æ–±–∞–≤–ª–µ–Ω–æ:** 3
- **–ö–ª—é—á–µ–π –ø–µ—Ä–µ–≤–æ–¥–∞:** 70+

### üîÆ –°–ª–µ–¥—É—é—â–∏–µ —ç—Ç–∞–ø—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

1. **–ü–æ–ª–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥ –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏–π:**
   - –ü–µ—Ä–µ–≤–µ—Å—Ç–∏ –≤—Å–µ —Ö–∞—Ä–¥–∫–æ–¥–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ JSON —Ñ–∞–π–ª–æ–≤
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å i18n context –≤–æ –≤—Å–µ—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞—Ö

2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–≤–æ–¥–æ–≤:**
   - –ü–æ–ø—Ä–æ—Å–∏—Ç—å –Ω–æ—Å–∏—Ç–µ–ª–µ–π —Ç–∞–¥–∂–∏–∫—Å–∫–æ–≥–æ –∏ —É–∑–±–µ–∫—Å–∫–æ–≥–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—Å—Ç—ã
   - –ò—Å–ø—Ä–∞–≤–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω—ã–µ –æ—à–∏–±–∫–∏ –ø–µ—Ä–µ–≤–æ–¥–∞

3. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —è–∑—ã–∫–æ–≤:**
   - –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–µ –ø–∞–ø–∫–∏ –≤ `locales/`
   - –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –≤ `UserLanguageManager`
   - –û–±–Ω–æ–≤–∏—Ç—å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –≤—ã–±–æ—Ä–∞ —è–∑—ã–∫–∞

4. **–õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä:**
   - –ü–µ—Ä–µ–≤–µ—Å—Ç–∏ –∫–Ω–æ–ø–∫–∏ –º–µ–Ω—é –Ω–∞ —Ä–∞–∑–Ω—ã–µ —è–∑—ã–∫–∏
   - –°–¥–µ–ª–∞—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä

### ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **Backward compatibility:** –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ–ª—É—á–∞—Ç —è–∑—ã–∫ "ru" –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
2. **Fallback:** –ï—Å–ª–∏ —è–∑—ã–∫ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ä—É—Å—Å–∫–∏–π
3. **JSON –≤–∞–ª–∏–¥–∞—Ü–∏—è:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ JSON —Ñ–∞–π–ª—ã –≤–∞–ª–∏–¥–Ω—ã –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º
4. **Middleware –ø–æ—Ä—è–¥–æ–∫:** i18n middleware –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –¥–æ —Ä–æ—É—Ç–µ—Ä–æ–≤

### üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

- –ù–µ—Ç (–ø–æ–∫–∞ —á—Ç–æ)

### üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –í—Å–µ –ø–µ—Ä–µ–≤–æ–¥—ã —Å–æ–∑–¥–∞–Ω—ã —Å –ø–æ–º–æ—â—å—é –º–∞—à–∏–Ω–Ω–æ–≥–æ –ø–µ—Ä–µ–≤–æ–¥–∞ –∏ —Ç—Ä–µ–±—É—é—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–æ—Å–∏—Ç–µ–ª—è–º–∏ —è–∑—ã–∫–∞
- –≠–º–æ–¥–∑–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è UX –∏ –æ–¥–∏–Ω–∞–∫–æ–≤—ã –≤–æ –≤—Å–µ—Ö —è–∑—ã–∫–∞—Ö
- –§–æ—Ä–º–∞—Ç –¥–∞—Ç –ø–æ–∫–∞ –Ω–µ –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω (–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–∑–∂–µ)

---

**–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üöÄ**

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –≤–æ–ø—Ä–æ—Å—ã, –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ `I18N_SETUP.md` –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.

